<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Angie Juliette - Psicología</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;700&family=Raleway:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <style id="app-style">
    body {
      font-family: 'Raleway', sans-serif;
      color: #333;
      scroll-behavior: smooth;
    }
    h1, h2, h3, h4, .font-serif {
      font-family: 'Playfair Display', serif;
    }
    .hero {
      background: linear-gradient(to right, #f0e6ff, #f9f5ff);
    }
    .plan-card {
      transition: all 0.3s ease;
    }
    .plan-card:hover {
      transform: translateY(-5px);
      box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
    }
    .plan-card.selected {
      border-color: #8b5cf6;
      background-color: #f5f3ff;
    }
    .btn-primary {
      background-color: #8b5cf6;
      transition: all 0.3s ease;
    }
    .btn-primary:hover {
      background-color: #7c3aed;
    }
    .btn-outline {
      border: 2px solid #8b5cf6;
      color: #8b5cf6;
      transition: all 0.3s ease;
    }
    .btn-outline:hover {
      background-color: #8b5cf6;
      color: white;
    }
    .floating-label input:focus-within ~ label,
    .floating-label input:not(:placeholder-shown) ~ label,
    .floating-label textarea:focus-within ~ label,
    .floating-label textarea:not(:placeholder-shown) ~ label,
    .floating-label select:focus-within ~ label,
    .floating-label select:not(:placeholder-shown) ~ label {
      transform: translateY(-1.5rem) scale(0.85);
      color: #8b5cf6;
    }
    /* Custom datepicker styling will be handled by the flatpickr library */
  </style>
</head>
<body class="bg-white">
  <!-- Header Navigation -->
  <header class="sticky top-0 z-50 bg-white shadow-md">
    <div class="container mx-auto px-4 py-3 flex justify-between items-center">
      <a href="javascript:void(0)" class="text-2xl font-serif font-bold text-violet-700">Angie Juliette</a>
      <nav class="hidden md:flex space-x-6">
        <a href="#sobre-mi" class="font-medium text-gray-600 hover:text-violet-700 transition">Sobre mí</a>
        <a href="#planes" class="font-medium text-gray-600 hover:text-violet-700 transition">Planes y precios</a>
        <a href="#agendar" class="font-medium text-gray-600 hover:text-violet-700 transition">Agendar cita</a>
      </nav>
      <button class="md:hidden focus:outline-none" id="menu-button">
        <i class="fas fa-bars text-violet-700 text-xl"></i>
      </button>
    </div>
    <!-- Mobile menu -->
    <div class="hidden bg-white w-full shadow-md py-2" id="mobile-menu">
      <div class="container mx-auto px-4 flex flex-col space-y-3">
        <a href="#sobre-mi" class="font-medium text-gray-600 py-2 hover:text-violet-700 transition">Sobre mí</a>
        <a href="#planes" class="font-medium text-gray-600 py-2 hover:text-violet-700 transition">Planes y precios</a>
        <a href="#agendar" class="font-medium text-gray-600 py-2 hover:text-violet-700 transition">Agendar cita</a>
      </div>
    </div>
  </header>

  <!-- Hero Section -->
  <section class="hero py-20">
    <div class="container mx-auto px-4 flex flex-col items-center text-center">
      <h1 class="text-4xl md:text-5xl lg:text-6xl font-serif font-bold text-violet-800 mb-6">Tu bienestar mental es mi prioridad</h1>
      <p class="text-lg md:text-xl text-gray-700 max-w-2xl mb-10">Atención psicológica profesional con un enfoque personalizado, para ayudarte a superar tus desafíos y alcanzar tu mejor versión.</p>
      <a id="first-appointment-btn" href="#agendar" class="btn-primary px-8 py-3 rounded-full text-white font-medium text-lg shadow-lg hover:shadow-xl">
        Agenda tu primera cita
      </a>
    </div>
  </section>

  <!-- About Me Section -->
  <section id="sobre-mi" class="py-20 bg-white">
    <div class="container mx-auto px-4">
      <h2 class="text-3xl md:text-4xl font-serif font-bold text-center mb-16 text-violet-800">Sobre mí</h2>
      <div class="flex flex-col md:flex-row items-center gap-12">
        <div class="w-full md:w-1/3 flex justify-center">
          <div class="relative w-64 h-64 md:w-80 md:h-80 rounded-full overflow-hidden border-4 border-violet-100 shadow-lg">
            <img id="profile-image" src="https://cdn.pixabay.com/photo/2017/08/06/00/27/yoga-2587066_1280.jpg" alt="Angie Juliette - Psicóloga" class="w-full h-full object-cover">
          </div>
        </div>
        <div class="w-full md:w-2/3">
          <h3 class="text-2xl font-serif font-bold text-violet-700 mb-4">Angie Juliette</h3>
          <p class="text-lg text-gray-700 mb-6">
            Soy psicóloga clínica con más de 8 años de experiencia, especializada en terapia cognitivo-conductual y mindfulness. Mi enfoque se centra en proporcionar un espacio seguro y de confianza donde mis pacientes puedan explorar sus emociones y desarrollar herramientas para enfrentar sus desafíos.
          </p>
          <p class="text-lg text-gray-700 mb-6">
            Graduada con honores de la Universidad Nacional, cuento con especialización en psicoterapia y un máster en psicología de la salud. Mi formación constante me permite ofrecer técnicas actualizadas y efectivas para el tratamiento de ansiedad, depresión, estrés y desarrollo personal.
          </p>
          <p class="text-lg text-gray-700">
            Mi objetivo es acompañarte en tu proceso de crecimiento personal, ayudándote a descubrir tus fortalezas y a construir una vida más plena y significativa.
          </p>
        </div>
      </div>
    </div>
  </section>

  <!-- Plans Section -->
  <section id="planes" class="py-20 bg-gray-50">
    <div class="container mx-auto px-4">
      <h2 class="text-3xl md:text-4xl font-serif font-bold text-center mb-6 text-violet-800">Planes y precios</h2>
      <p class="text-lg text-center text-gray-700 max-w-3xl mx-auto mb-16">
        Ofrezco diferentes opciones para adaptarme a tus necesidades y presupuesto.
        Todos los planes incluyen la misma calidad de atención personalizada.
      </p>

      <div class="grid grid-cols-1 md:grid-cols-3 gap-8 max-w-5xl mx-auto">
        <!-- Basic Plan -->
        <div class="plan-card bg-white rounded-xl shadow-lg overflow-hidden border border-gray-200" data-plan="basic">
          <div class="bg-gray-100 p-6">
            <h3 class="text-2xl font-serif font-bold text-violet-700 text-center">Plan Básico</h3>
          </div>
          <div class="p-8 flex flex-col items-center">
            <div class="text-center mb-6">
              <p class="text-4xl font-bold text-gray-800">$80<span class="text-lg text-gray-600">/sesión</span></p>
              <p class="text-gray-600 mt-2">4 sesiones mensuales</p>
            </div>
            <ul class="mb-8 w-full">
              <li class="flex items-center mb-3">
                <i class="fas fa-check text-green-500 mr-2"></i>
                <span>Evaluación inicial completa</span>
              </li>
              <li class="flex items-center mb-3">
                <i class="fas fa-check text-green-500 mr-2"></i>
                <span>Sesiones de 45 minutos</span>
              </li>
              <li class="flex items-center mb-3">
                <i class="fas fa-check text-green-500 mr-2"></i>
                <span>Material de apoyo básico</span>
              </li>
            </ul>
            <button class="btn-outline w-full py-3 rounded-lg font-medium select-plan-btn" data-plan="basic">
              Seleccionar plan
            </button>
          </div>
        </div>

        <!-- Normal Plan -->
        <div class="plan-card bg-white rounded-xl shadow-xl overflow-hidden border border-gray-200 transform scale-105" data-plan="normal">
          <div class="bg-violet-600 p-6">
            <h3 class="text-2xl font-serif font-bold text-white text-center">Plan Normal</h3>
            <p class="text-center text-violet-200 text-sm mt-1">Recomendado</p>
          </div>
          <div class="p-8 flex flex-col items-center">
            <div class="text-center mb-6">
              <p class="text-4xl font-bold text-gray-800">$70<span class="text-lg text-gray-600">/sesión</span></p>
              <p class="text-gray-600 mt-2">6 sesiones mensuales</p>
            </div>
            <ul class="mb-8 w-full">
              <li class="flex items-center mb-3">
                <i class="fas fa-check text-green-500 mr-2"></i>
                <span>Evaluación inicial completa</span>
              </li>
              <li class="flex items-center mb-3">
                <i class="fas fa-check text-green-500 mr-2"></i>
                <span>Sesiones de 50 minutos</span>
              </li>
              <li class="flex items-center mb-3">
                <i class="fas fa-check text-green-500 mr-2"></i>
                <span>Material de apoyo personalizado</span>
              </li>
              <li class="flex items-center mb-3">
                <i class="fas fa-check text-green-500 mr-2"></i>
                <span>1 consulta breve de emergencia</span>
              </li>
            </ul>
            <button class="btn-primary w-full py-3 rounded-lg font-medium text-white select-plan-btn" data-plan="normal">
              Seleccionar plan
            </button>
          </div>
        </div>

        <!-- Premium Plan -->
        <div class="plan-card bg-white rounded-xl shadow-lg overflow-hidden border border-gray-200" data-plan="premium">
          <div class="bg-gray-100 p-6">
            <h3 class="text-2xl font-serif font-bold text-violet-700 text-center">Plan Premium</h3>
          </div>
          <div class="p-8 flex flex-col items-center">
            <div class="text-center mb-6">
              <p class="text-4xl font-bold text-gray-800">$65<span class="text-lg text-gray-600">/sesión</span></p>
              <p class="text-gray-600 mt-2">8 sesiones mensuales</p>
            </div>
            <ul class="mb-8 w-full">
              <li class="flex items-center mb-3">
                <i class="fas fa-check text-green-500 mr-2"></i>
                <span>Evaluación inicial completa</span>
              </li>
              <li class="flex items-center mb-3">
                <i class="fas fa-check text-green-500 mr-2"></i>
                <span>Sesiones de 60 minutos</span>
              </li>
              <li class="flex items-center mb-3">
                <i class="fas fa-check text-green-500 mr-2"></i>
                <span>Material de apoyo premium</span>
              </li>
              <li class="flex items-center mb-3">
                <i class="fas fa-check text-green-500 mr-2"></i>
                <span>2 consultas breves de emergencia</span>
              </li>
              <li class="flex items-center mb-3">
                <i class="fas fa-check text-green-500 mr-2"></i>
                <span>Seguimiento semanal por chat</span>
              </li>
            </ul>
            <button class="btn-outline w-full py-3 rounded-lg font-medium select-plan-btn" data-plan="premium">
              Seleccionar plan
            </button>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Booking Section -->
  <section id="agendar" class="py-20 bg-white">
    <div class="container mx-auto px-4">
      <h2 class="text-3xl md:text-4xl font-serif font-bold text-center mb-6 text-violet-800">Agenda tu cita</h2>
      <p class="text-lg text-center text-gray-700 max-w-3xl mx-auto mb-16">
        Estoy aquí para ayudarte. Completa el siguiente formulario para agendar tu cita y comenzar tu proceso de bienestar.
      </p>

      <div class="max-w-3xl mx-auto">
        <form id="booking-form" class="booking-form bg-white p-8 rounded-xl shadow-lg border border-gray-100">
          <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
            <div class="floating-label col-span-1 relative">
              <input type="text" id="nombre" name="nombre" placeholder=" " required
                class="w-full px-4 py-3 rounded-md border border-gray-300 focus:outline-none focus:border-violet-500 peer">
              <label for="nombre" class="absolute text-gray-500 left-4 top-3 transition-all duration-200 peer-focus:-top-1">
                Nombre completo *
              </label>
            </div>

            <div class="floating-label col-span-1 relative">
              <input type="email" id="email" name="email" placeholder=" " required
                class="w-full px-4 py-3 rounded-md border border-gray-300 focus:outline-none focus:border-violet-500">
              <label for="email" class="absolute text-gray-500 left-4 top-3 transition-all duration-200">
                Correo electrónico *
              </label>
            </div>

            <div class="floating-label col-span-1 relative">
              <input type="tel" id="telefono" name="telefono" placeholder=" " required
                class="w-full px-4 py-3 rounded-md border border-gray-300 focus:outline-none focus:border-violet-500">
              <label for="telefono" class="absolute text-gray-500 left-4 top-3 transition-all duration-200">
                Teléfono *
              </label>
            </div>

            <div class="floating-label col-span-1 relative">
              <select id="plan" name="plan" required
                class="w-full px-4 py-3 rounded-md border border-gray-300 focus:outline-none focus:border-violet-500 appearance-none bg-white">
                <option value="" disabled selected></option>
                <option value="basic">Plan Básico</option>
                <option value="normal">Plan Normal</option>
                <option value="premium">Plan Premium</option>
              </select>
              <label for="plan" class="absolute text-gray-500 left-4 top-3 transition-all duration-200">
                Plan de consulta *
              </label>
              <div class="pointer-events-none absolute inset-y-0 right-0 flex items-center px-3 text-gray-500">
                <i class="fas fa-chevron-down"></i>
              </div>
            </div>

            <div class="floating-label col-span-1 relative">
              <input type="text" id="fecha" name="fecha" placeholder=" " required
                class="w-full px-4 py-3 rounded-md border border-gray-300 focus:outline-none focus:border-violet-500 datepicker">
              <label for="fecha" class="absolute text-gray-500 left-4 top-3 transition-all duration-200">
                Fecha de cita *
              </label>
            </div>

            <div class="floating-label col-span-1 relative">
              <select id="hora" name="hora" required
                class="w-full px-4 py-3 rounded-md border border-gray-300 focus:outline-none focus:border-violet-500 appearance-none bg-white">
                <option value="" disabled selected></option>
                <option value="09:00">09:00 AM</option>
                <option value="10:00">10:00 AM</option>
                <option value="11:00">11:00 AM</option>
                <option value="12:00">12:00 PM</option>
                <option value="14:00">02:00 PM</option>
                <option value="15:00">03:00 PM</option>
                <option value="16:00">04:00 PM</option>
                <option value="17:00">05:00 PM</option>
              </select>
              <label for="hora" class="absolute text-gray-500 left-4 top-3 transition-all duration-200">
                Hora de cita *
              </label>
              <div class="pointer-events-none absolute inset-y-0 right-0 flex items-center px-3 text-gray-500">
                <i class="fas fa-chevron-down"></i>
              </div>
            </div>

            <div class="floating-label col-span-2 relative">
              <textarea id="motivo" name="motivo" rows="4" placeholder=" " required
                class="w-full px-4 py-3 rounded-md border border-gray-300 focus:outline-none focus:border-violet-500"></textarea>
              <label for="motivo" class="absolute text-gray-500 left-4 top-3 transition-all duration-200">
                Motivo de la consulta *
              </label>
            </div>
          </div>

          <div class="mt-8 text-center">
            <button type="submit" id="submit-btn" class="btn-primary px-10 py-3 rounded-full text-white font-medium text-lg shadow-lg hover:shadow-xl">
              Agendar cita
            </button>
          </div>
        </form>

        <!-- Confirmation message (hidden by default) -->
        <div id="confirmation-message" class="hidden mt-8 bg-green-50 border border-green-200 rounded-xl p-8 text-center">
          <div class="text-green-500 text-5xl mb-4">
            <i class="far fa-check-circle"></i>
          </div>
          <h3 class="text-2xl font-serif font-bold text-green-700 mb-3">¡Cita agendada con éxito!</h3>
          <p class="text-gray-700 mb-6">
            Hemos recibido tu solicitud de cita. Recibirás un correo electrónico de confirmación en breve 
            con los detalles de tu cita.
          </p>
          <button id="new-appointment-btn" class="btn-primary px-8 py-3 rounded-full text-white font-medium">
            Nueva cita
          </button>
        </div>

        <!-- Loading indicator (hidden by default) -->
        <div id="loading-indicator" class="hidden mt-8 p-8 text-center">
          <div class="inline-block animate-spin rounded-full h-12 w-12 border-4 border-violet-500 border-t-transparent"></div>
          <p class="mt-4 text-gray-700">Procesando tu solicitud...</p>
        </div>
      </div>
    </div>
  </section>

  <!-- Testimonials Section -->
  <section class="py-20 bg-gray-50">
    <div class="container mx-auto px-4">
      <h2 class="text-3xl md:text-4xl font-serif font-bold text-center mb-16 text-violet-800">Lo que dicen mis pacientes</h2>
      
      <div class="grid grid-cols-1 md:grid-cols-3 gap-8 max-w-5xl mx-auto">
        <div class="bg-white p-8 rounded-xl shadow-md">
          <div class="text-yellow-400 mb-4">
            <i class="fas fa-star"></i>
            <i class="fas fa-star"></i>
            <i class="fas fa-star"></i>
            <i class="fas fa-star"></i>
            <i class="fas fa-star"></i>
          </div>
          <p class="text-gray-700 italic mb-4">
            "Angie ha transformado mi vida por completo. Su enfoque profesional pero cálido me ayudó a superar mi ansiedad y a encontrar herramientas para manejar el estrés diario."
          </p>
          <p class="font-bold text-gray-800">- María L.</p>
        </div>
        
        <div class="bg-white p-8 rounded-xl shadow-md">
          <div class="text-yellow-400 mb-4">
            <i class="fas fa-star"></i>
            <i class="fas fa-star"></i>
            <i class="fas fa-star"></i>
            <i class="fas fa-star"></i>
            <i class="fas fa-star"></i>
          </div>
          <p class="text-gray-700 italic mb-4">
            "Después de meses de terapia con Angie, finalmente pude entender patrones que me impedían avanzar en mi vida. Su apoyo ha sido fundamental en mi proceso de crecimiento."
          </p>
          <p class="font-bold text-gray-800">- Carlos R.</p>
        </div>
        
        <div class="bg-white p-8 rounded-xl shadow-md">
          <div class="text-yellow-400 mb-4">
            <i class="fas fa-star"></i>
            <i class="fas fa-star"></i>
            <i class="fas fa-star"></i>
            <i class="fas fa-star"></i>
            <i class="fas fa-star-half-alt"></i>
          </div>
          <p class="text-gray-700 italic mb-4">
            "La terapia con Angie me ha proporcionado un espacio seguro para explorar mis emociones. Su enfoque práctico y sus técnicas han sido muy efectivas para mi recuperación."
          </p>
          <p class="font-bold text-gray-800">- Sofía M.</p>
        </div>
      </div>
    </div>
  </section>

  <!-- Footer -->
  <footer class="bg-violet-900 text-white py-12">
    <div class="container mx-auto px-4">
      <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
        <div>
          <h3 class="text-xl font-serif font-bold mb-4">Angie Juliette</h3>
          <p class="mb-4">Psicóloga Clínica</p>
          <p class="mb-2">
            <i class="fas fa-map-marker-alt mr-2"></i> Calle Principal #123, Ciudad
          </p>
          <p class="mb-2">
            <i class="fas fa-phone-alt mr-2"></i> (123) 456-7890
          </p>
          <p>
            <i class="fas fa-envelope mr-2"></i> contacto@angiejuliette.com
          </p>
        </div>
        
        <div>
          <h3 class="text-xl font-serif font-bold mb-4">Horario de atención</h3>
          <p class="mb-2">Lunes a Viernes: 9:00 AM - 6:00 PM</p>
          <p>Sábados: 9:00 AM - 1:00 PM</p>
        </div>
        
        <div>
          <h3 class="text-xl font-serif font-bold mb-4">Sígueme</h3>
          <div class="flex space-x-4">
            <a href="javascript:void(0)" class="hover:text-violet-300 transition">
              <i class="fab fa-facebook-f text-xl"></i>
            </a>
            <a href="javascript:void(0)" class="hover:text-violet-300 transition">
              <i class="fab fa-instagram text-xl"></i>
            </a>
            <a href="javascript:void(0)" class="hover:text-violet-300 transition">
              <i class="fab fa-twitter text-xl"></i>
            </a>
            <a href="javascript:void(0)" class="hover:text-violet-300 transition">
              <i class="fab fa-linkedin-in text-xl"></i>
            </a>
          </div>
        </div>
      </div>
      
      <div class="border-t border-violet-700 mt-8 pt-8 text-center text-violet-300">
        <p>&copy; 2025 Angie Juliette - Psicología. Todos los derechos reservados.</p>
      </div>
    </div>
  </footer>

  <script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">
  
  <script id="app-script">
    document.addEventListener('DOMContentLoaded', function() {
      // Mobile menu toggle
      const menuButton = document.getElementById('menu-button');
      const mobileMenu = document.getElementById('mobile-menu');
      
      if (menuButton && mobileMenu) {
        menuButton.addEventListener('click', function() {
          mobileMenu.classList.toggle('hidden');
        });

        // Close mobile menu when clicking on links
        const mobileLinks = mobileMenu.querySelectorAll('a');
        mobileLinks.forEach(link => {
          link.addEventListener('click', function() {
            mobileMenu.classList.add('hidden');
          });
        });
      }

      // Scroll suave para el botón 'Agenda tu primera cita'
      const firstBtn = document.getElementById('first-appointment-btn');
      if (firstBtn) {
        firstBtn.addEventListener('click', function(e) {
          e.preventDefault();
          const agendarSection = document.getElementById('agendar');
          if (agendarSection) {
            agendarSection.scrollIntoView({ behavior: 'smooth' });
          }
        });
      }

      // Initialize date picker
      flatpickr(".datepicker", {
        minDate: "today",
        dateFormat: "Y-m-d",
        disable: [
          function(date) {
            // Disable Sundays
            return (date.getDay() === 0);
          }
        ]
      });

      // Plan selection from cards
      const planButtons = document.querySelectorAll('.select-plan-btn');
      if (planButtons.length > 0) {
        planButtons.forEach(button => {
          button.addEventListener('click', function() {
            const selectedPlan = this.getAttribute('data-plan');
            const planSelect = document.getElementById('plan');
            
            // Update select value
            if (planSelect) {
              planSelect.value = selectedPlan;
            }
            
            // Scroll to booking section
            const agendarSection = document.getElementById('agendar');
            if (agendarSection) {
              agendarSection.scrollIntoView({ behavior: 'smooth' });
            }
          });
        });
      }

      // Form submission
      const bookingForm = document.getElementById('booking-form');
      const confirmationMessage = document.getElementById('confirmation-message');
      const loadingIndicator = document.getElementById('loading-indicator');
      
      if (bookingForm && confirmationMessage && loadingIndicator) {
        bookingForm.addEventListener('submit', async function(e) {
          e.preventDefault();
          
          // Show loading
          bookingForm.classList.add('hidden');
          loadingIndicator.classList.remove('hidden');
          
          const formData = {
            fullName: document.getElementById('nombre').value,
            email:    document.getElementById('email').value,
            phone:    document.getElementById('telefono').value,
            reason:   document.getElementById('motivo').value,
            plan:     document.getElementById('plan').value,
            date:     document.getElementById('fecha').value,
            time:     document.getElementById('hora').value
          };
          
          try {
            // 1) AppointmentAPI
            const apptRes = await fetch(
              'https://magicloops.dev/api/loop/3e368256-7e50-46e3-8fdc-d417a1a55211/run', 
              {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify(formData)
              }
            );
            const apptJson = await apptRes.json();
            if (!apptJson.appointmentId || apptJson.status!=='confirmed') {
              throw new Error('Appointment failed');
            }
            
            // 2) BookingAPI
            await fetch(
              'https://magicloops.dev/api/loop/aa1248f3-10da-48f8-887a-291a1523e471/run', 
              {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify(formData)
              }
            );
            
            // 3) BookingConfirm
            await fetch(
              'https://magicloops.dev/api/loop/23b2a5f4-f906-45ec-b1fc-c868c9a5d82a/run', 
              {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify(formData)
              }
            );
            
            // All done → show confirmation
            loadingIndicator.classList.add('hidden');
            confirmationMessage.classList.remove('hidden');
          
          } catch (error) {
            console.error(error);
            alert('Hubo un problema al agendar tu cita. Por favor intenta nuevamente.');
            loadingIndicator.classList.add('hidden');
            bookingForm.classList.remove('hidden');
          }
        });
      }
      
      // New appointment button
      const newAppointmentBtn = document.getElementById('new-appointment-btn');
      if (newAppointmentBtn && bookingForm && confirmationMessage) {
        newAppointmentBtn.addEventListener('click', function() {
          // Reset form
          bookingForm.reset();
          
          // Hide confirmation and show form again
          confirmationMessage.classList.add('hidden');
          bookingForm.classList.remove('hidden');
        });
      }
    });
  </script>
</body>
</html>
